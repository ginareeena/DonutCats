language: node_js
node_js:
  - 12
services:
  - postgresql
addons:
  postgresql: "10"
dist: xenial
notifications:
  email:
    on_success: change
    on_failure: always
install:
  - npm ci
script:
  - npm test
  - npm run build-client
before_deploy:
  - rm -rf node_modules
deploy:
  skip_cleanup: true
  provider: heroku
  app: donut-cats
  api_key:
    secure: 970eafa1-f480-44cf-a249-63ea72a1647a
